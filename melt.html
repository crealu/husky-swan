<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Melting Menu</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #222;
      color: white;
      overflow: hidden;
      display: flex;
      justify-content: center;
    }

    .menu-wrapper {
    	width: 100%;
    	display: flex;
      align-items: center;
      justify-content: center;
    }

    .menu {
	    position: relative;
	    top: 2vh;
	    height: 90%;
	    cursor: pointer;
	    transition: transform 0.3s;
    }

    .menu:hover {
      transform: scale(1.01);	
    }

    .melting {
      animation: melt1 2s ease-out forwards;
    }

    .swan {
    	position: absolute;
    	margin: 0 auto;
    	left: 0%;
    	right: 0%;
    	display: none;
    	width: 400px;
    	top: calc(50vh - 150px);
    }

    @keyframes melt {
      0% { transform: translateY(0) scaleX(1); }
      25% { transform: translateY(10px) scaleX(1.02); }
      50% { transform: translateY(30px) scaleX(1.05); }
      75% { transform: translateY(60px) scaleX(1.1); opacity: 0.5; }
      100% { transform: translateY(100px) scaleX(1.2); opacity: 0; }
    }

    @keyframes melt1 {
      0% { 
     		clip-path: polygon(0% 0%, 100% 0%, 80% 100%, 20% 100%);
      }

      100% { 
      	clip-path: polygon(0% 0%, 100% 0%, 90% 110%, 10% 110%);
      }
    }

    .hidden-text {
			position: absolute;
			opacity: 0;
			top: calc(50vh - 23px);
			transition: opacity 1s ease-in;
			font-size: 20px;
			transition-delay: 0.25s;
    }

    .visible {
      opacity: 1;
    }
  </style>
</head>
<body>
	<!-- <p class="opening-text">PLEASE SELECT AN ITEM</p> -->
	<img src="media/Group 12.png" class="menu" id="menu" />
	<img src="media/swan.svg" class="swan" id="swan" />
  <div class="hidden-text" id="text">GO <br> FUCK <br> YOURSELF</div>
	<script src="https://cdn.jsdelivr.net/npm/@mojs/core"></script>

  <script>
  	const menu = document.getElementById('menu');
		const swan = document.getElementById('swan');
		const text = document.getElementById("text")
  	const burst = new mojs.Burst({
		  radius:   { 0: 100 },
		  count:    5,
		  children: {
		    shape:      'polygon',
		    fill:       { 'cyan' : 'yellow' },
		    radius:     20,
		    rotate:      { 360: 0 },
		    duration:   1000
		  }
		});

		function cueSwans() {
			swan.style.display = 'block';
			let t = 12;
			let id = setInterval(frame, 300);
			function frame() {
				t--;
				if (t % 2 == 0) {
					swan.src = './media/squawk.svg';
				} else {
					swan.src = `./media/swan.svg`
				}
				if (t == 2) {
					clearInterval(id);
				}
			}
		}

		function cycleMelt() {
			let t = 12;
			let id = setInterval(frame, 200);
			function frame() {
				t--;
				menu.src = `./media/Group ${t.toString()}.png`;
				if (t == 2) {
					clearInterval(id);
				}
			}
		}

    menu.addEventListener("click", (event) => {
      // event.target.classList.add("melting");
      cycleMelt();
      setTimeout(() => {
        event.target.style.display = "none";
        burst.generate();
    		burst.replay();
        text.classList.add("visible");
        setTimeout(() => {
        	text.classList.remove("visible");
        	cueSwans()
        }, 1000);
      }, 2000);
    });

    window.addEventListener('load', () => {

    })
  </script>
</body>
</html>
